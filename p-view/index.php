<div class="page-header align-center" style="padding-top: 28px;padding-bottom: 28px;background-color: whiteSmoke; margin: 0px auto 18px auto;">
   <h1>再三推詞(舊曲新詞)- Lyrics Recommendation By Song</h1>
</div>
<br class="clearboth" />
<div id="midi-upload-block" class="row well" style="width: 400px; margin: 10px auto;">
   <div style="width: 120px; margin: 0px auto;">
      <a id="pick-midi-file">
         <button type="submit" class="btn btn-primary start">
            <i class="icon-upload icon-white"></i>
            <span>
               開始上傳歌曲
            </span>
         </button>
      </a>
   </div>
</div>
<div style="width:470px;margin: 10px auto;">
   <div class="progress progress-success progress-striped margin-all hide" style="width: 450px;">
      <div class="bar" style="width: 0%"></div>
   </div>
</div>
<br class="clearboth" />
<hr />
<div id="accordion" style="width: 800px; margin: 10px auto;">
   <h3 id="1093_h" class="a-h" style="display:none;">
      <a href="#">恰似你的溫柔 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;原唱：鄧麗君 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button class="r-link" data-song-id="1093_1093">查詢原曲試聽</button></a>
   </h3>
   <div id="1093_d" class="a-d" style="display:none;">
      <h4>
         歌詞配對結果：
      </h4>
      <ul>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="1093_1093">1. <sapn style="font-size:12px;">恰似你的溫柔</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="1093_1093">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="1093_454">2. <sapn style="font-size:12px;">翅膀</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="1093_454">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="1093_775">3. <sapn style="font-size:12px;">心愛的再會啦</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="1093_775">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="1093_605">4. <sapn style="font-size:12px;">梨渦淺笑</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="1093_605">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="1093_699">5. <sapn style="font-size:12px;">貝多芬與我</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="1093_699">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
      </ul>
   </div>
   <h3 id="921_h" class="a-h" style="display:none;">
      <a href="#">情非得已 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;原唱：庾澄慶 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button class="r-link" data-song-id="921_921">查詢原曲試聽</button></a>
   </h3>
   <div id="921_d" class="a-d" style="display:none;">
      <h4>
         歌詞配對結果：
      </h4>
      <ul>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="921_921">1. <sapn style="font-size:12px;">情非得已</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="921_921">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="921_920">2. <sapn style="font-size:12px;">幸福離我們很近</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="921_920">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="921_141">3. <sapn style="font-size:12px;">怯</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="921_141">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="921_80">4. <sapn style="font-size:12px;">I believe</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="921_80">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="921_788">5. <sapn style="font-size:12px;">七里香</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="921_788">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
      </ul>
   </div>
   <h3 id="922_h" class="a-h" style="display:none;">
      <a href="#">愛如潮水 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;原唱：張信哲 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button class="r-link" data-song-id="922_922">查詢原曲試聽</button></a>
   </h3>
   <div id="922_d" class="a-d" style="display:none;">
      <h4>
         推薦結果：
      </h4>
      <ul>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="922_922">1. <sapn style="font-size:12px;">愛如潮水</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="922_922">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="922_925">2. <sapn style="font-size:12px;">愛你的餘溫</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="922_925">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="922_220">3. <sapn style="font-size:12px;">勇氣</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="922_220">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="922_210">4. <sapn style="font-size:12px;">夜太黑</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="922_210">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="922_325">5. <sapn style="font-size:12px;">潛意識</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="922_325">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
      </ul>
   </div>
   <h3 id="924_h" class="a-h" style="display:none;">
      <a href="#">容易受傷的女人 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;原唱：鄺美雲 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button class="r-link" data-song-id="924_924">查詢原曲試聽</button></a>
   </h3>
   <div id="924_d" class="a-d" style="display:none;">
      <h4>
         推薦結果：
      </h4>
      <ul>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="924_924">1. <sapn style="font-size:12px;">容易受傷的女人</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="924_924">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="924_923">2. <sapn style="font-size:12px;">情人之間的情人</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="924_923">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="924_41">3. <sapn style="font-size:12px;">不要變</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="924_41">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="924_75">4. <sapn style="font-size:12px;">下沙</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="924_75">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="924_61">5. <sapn style="font-size:12px;">一個人的天荒地老</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="924_61">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
      </ul>
   </div>
   <h3 id="1_h" class="a-h" style="display:none;">
      <a href="#">但願人長久 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;原唱：王菲 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button class="r-link" data-song-id="1_1">查詢原曲試聽</button></a>
   </h3>
   <div id="1_d" class="a-d" style="display:none;">
      <h4>
         推薦結果：
      </h4>
      <ul>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="1_1">1. <sapn style="font-size:12px;">但願人長久</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="1_1">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="1_605">2. <sapn style="font-size:12px;">梨渦淺笑</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="1_605">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="1_a">3. <sapn style="font-size:12px;">床前明月光</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="1_a">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
      </ul>
   </div>
   <!-- Hey Jude -->
   <h3 id="1157_h" class="a-h" style="display:none;">
      <a href="#">Hey Jude &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Singer：Beatles &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button class="r-link" data-song-id="heyjude">查詢原曲試聽</button></a>
   </h3>
   <div id="1157_d" class="a-d" style="display:none;">
      <h4>
         推薦結果：
      </h4>
      <ul>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="1157_1157">1. <sapn style="font-size:12px;">Hey Jude</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="1157_1157">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="1157_1106">2. <sapn style="font-size:12px;">Yesterday</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="1157_1106">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="1157_1159">3. <sapn style="font-size:12px;">Over The Rainbow</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="1157_1159">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
         <li style="list-style-type:none;">
            <table>
               <tr width="600px">
                  <td width="400px">
                     <a class="r-link" data-song-id="1157_1160">4. <sapn style="font-size:12px;">Blue Moon</span></a>
                  </td>
                  <td width="200px">
                     <button style="color:black;font-weight:normal;" class="r-link" data-song-id="1157_1160">歌詞與試聽</button>
                  </td>
               </tr>
            </table>
         </li>
      </ul>
   </div>
</div>
<br class="clearboth" />
<hr />
<div style="width: 800px; margin: 20px auto;">
   <img width="800" src="<?=SITE_HOST?>/p-asset/image/ui-icon/banner.png" />
</div>
<br class="clearboth" />
<script>

   $(function() {
      $( "#accordion" ).accordion();
   });

   $('.r-link').on('click', function () {

      $.ajax({
         url: '<?=SITE_HOST?>/ajax-action/box-action/r-song-box',
         type: "GET",
         data: {song_id: $(this).attr("data-song-id")},
         dataType: "html",
         beforeSend: function( xhr ) {
         },
         success: function( html_block ) {
            $('#p-modal-block').html(html_block);
         }
      });

   });

   var audio_uploader = new plupload.Uploader({
      runtimes : 'html5,flash,gears,silverlight,browserplus',
      browse_button : 'pick-midi-file',
      container: 'midi-upload-block',
      max_file_size : '100mb',
      chunk_size : '1mb',
      url : '<?=SITE_HOST?>/ajax-action/user-action/user-upload',
      flash_swf_url : '<?=SITE_HOST?>/p-library/plupload/js/plupload.flash.swf',
      silverlight_xap_url : '<?=SITE_HOST?>/p-library/plupload/js/plupload.silverlight.xap',
      multiple_queues : false,
      multi_selection : false,
      max_file_count : 1,
      multipart : true,
      multipart_params : {song_id: '<?php echo $song_id; ?>'},
      init : {
         FilesAdded: function(up, files) {
            $('.progress').removeClass('hide');
            up.start();
            $('#system-message').html('處理中...');
            $('#system-message').show();
         },
         BeforeUpload: function (up, file) {
         },
         UploadProgress: function(up, file) {
            $('.progress .bar').css('width' , file.percent+'%');
         },
         UploadComplete: function(up, files) {
            $('.progress').addClass('hide').delay(500);
            $.each(files, function(i, file) {
               // Do stuff with the file. There will only be one file as it uploaded straight after adding!
            });
         },
         FileUploaded: function(up, file, resp) {

            var responseText = $.parseJSON(resp.response);
            console.log(file.name);
            if(responseText.response.status.code==0){

               $('#system-message').html('完成');
               $('#system-message').fadeOut();

            } else {
               $('#system-message').fadeOut();
               $('.progress .bar').css('width' , '0%');

               $( ".a-h" ).css('display', 'none');
               $( ".a-d" ).css('display', 'none');

               var file_name = file.name;

               switch (file_name) {
               case '1093_1093.mid':
               case '1093_1093.mp3':
                  $( "#accordion" ).accordion( "option", "active", 0);
                  $( "#1093_h" ).css('display', 'block');
                  $( "#1093_d" ).css('display', 'block');
                  $( "#1093_d" ).css('height', '150px');
                  break;
               case '921_921.mid':
               case '921_921.mp3':
                  $( "#accordion" ).accordion( "option", "active", 1);
                  $( "#921_h" ).css('display', 'block');
                  $( "#921_d" ).css('display', 'block');
                  $( "#921_d" ).css('height', '150px');
                  break;
               case '922_922.mid':
               case '922_922.mp3':
                  $( "#accordion" ).accordion( "option", "active", 2);
                  $( "#922_h" ).css('display', 'block');
                  $( "#922_d" ).css('display', 'block');
                  $( "#922_d" ).css('height', '150px');
                  break;
               case '924_924.mid':
               case '924_924.mp3':
                  $( "#accordion" ).accordion( "option", "active", 3);
                  $( "#924_h" ).css('display', 'block');
                  $( "#924_d" ).css('display', 'block');
                  $( "#924_d" ).css('height', '150px');
                  break;
               case '1_1.mid':
               case '1_1.mp3':
                  $( "#accordion" ).accordion( "option", "active", 4);
                  $( "#1_h" ).css('display', 'block');
                  $( "#1_d" ).css('display', 'block');
                  $( "#1_d" ).css('height', '150px');
                  break;
               case '1157_1157.mid':
               case '1157_1157.mp3':
                  $( "#accordion" ).accordion( "option", "active", 5);
                  $( "#1157_h" ).css('display', 'block');
                  $( "#1157_d" ).css('display', 'block');
                  $( "#1157_d" ).css('height', '150px');
                  break;
               default:
                  $.ajax({
                     url: '<?=SITE_HOST?>/ajax-action/box-action/alert-no-licence',
                     type: "GET",
                     data: {},
                     dataType: "html",
                     beforeSend: function( xhr ) {
                     },
                     success: function( html_block ) {
                        $('#p-modal-block').html(html_block);
                     }
                  });
                  break;
               }



               /**/

            }

         }
      }
   });

   audio_uploader.init();

</script>